<html>
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
          integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <style>
      #open{
      display:none;
      }
      .nav-link p {
  color:white;
}
.nav-link h3{
    color:white;
}
.bgimg{
    background-image: url(images/navbg.jpg);
}
.modal-open {
height: 200vh;
width: 100vw;
position: absolute;
top: 100px;
background-color: #f3f6f9;
display: flex;
justify-content: center;
align-items: center;
}
.modal-close {
display: none;
}

</style>
</head>
<body onload="load()" class="border border-secondary m-1">

<div class="container-fluid">
    <div class="row">
        <div class="col-2 bgimg text-secondary">
            <div>
                <ul class="nav flex-sm-column ">
                    <li>
                        <a href="#" class="nav-link">

                            <h3><i class='fa fa-home pe-2 mt-4 mb-4'></i>Hometel</h3>
                        </a>
                    </li>
                    <li>
                        <a href="dashboardpage.html" class="nav-link">

                            <p><i class='fa fa-dashboard pe-2'></i>DashBoard</p>
                        </a>
                    </li>
                    <li>
                        <a href="userpage.html" class=" nav-link">

                            <p> <i class='fa-solid fa-user-group pe-2'></i>People</p>
                        </a>
                    </li>
                    <li>
                        <a href="index.html" class="nav-link">

                            <p><i class='fa fa-bed pe-2'></i>Room</p>
                        </a>
                    </li>
                    <li>
                        <a href="paymentpage.html" class="nav-link">

                            <p><i class='fa fa-money pe-2'></i>Payment</p>
                        </a>
                    </li>
                    <li>
                        <a href="bookingpage.html" class="nav-link">

                            <p><i class='fa-solid fa-calendar-xmark pe-2'></i>Booking</p>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="col-10 p-3 min-vh-100" style="background-color:#f3f6f9;">
            <div class="row">
                <div class="col-9"></div>
                <div class="col-1 pe-0 me-0 pt-2 "> <i class='fa fa-bell-o'></i></div>
                <div class="col-2 ps-0 pe-0">
                    <div class="row">
                        <div class="col-6 pe-0 me-0 ps-0"><p class=" pt-0 mt-0 pb-0 mb-0">Varsha Reddy</p><p class="pb-0 mb-0"></p>Admin</p></div>
                        <div class="col-6 pe-0 me-0 ps-0"><img src="images/varsha.jpg" height="50px" class="rounded-circle"></div>
                    </div>
                </div>
                <hr>
            </div>
            <div id="open">
                <div class="row pt-3 mb-5 ps-3">

                    <div class="col-3 border border-2 shadow border-black pt-3">

                        <div>
                            <label for="roomno" class="form-label mb-0">
                                <h6>Room No:</h6>
                            </label>
                            <input type="text" class="form-control pe-2 mt-0" id="roomno" placeholder="101">
                        </div>

                        <div>
                            <label for="floorno" class="form-label mb-0 pt-2">
                                <h6>Floor No:</h6>
                            </label>
                            <input type="text" class="form-control mt-0" id="floorno" placeholder="1">
                        </div>


                        <div>
                            <label for="totalbeds" class="form-label mb-0 pt-2">
                                <h6>Total Beds:</h6>
                            </label>
                            <input type="text" class="form-control mt-0" id="totalbeds" placeholder="max=3">
                        </div>
                        <div class="text-center mt-3 mb-2">
                            <button type="button" onclick="clk()" class="btn btn-danger">Add Room</button>
                        </div>
                    </div>
                </div>
                <div class="col-9"></div>
            </div>

            <div class="ps-3">
                <h3>Rooms</h3>
            </div>
            <div class="row border border-dark ms-3 me-3 mt-3">

                <div class="row">
                    <div class="col-1 pt-2 text-center mt-4"><i class='fas fa-search'></i></div>

                    <div class="col-9 ps-0 mt-4">
                        <input class="form-control ms-0" type="text" placeholder="search">
                    </div>
                    <div class="col-2 mt-4">
                        <button type="button" class="btn btn-danger" onclick="disp()">+ Add Room</button>
                    </div>
                </div>
                <div class="row">

                    <div class="col-12">
                        <table class="table table-striped mt-4 ms-3 pe-5 mb-5 shadow-lg border border-light  border-3">
                            <thead class="ps-3">
                            <tr>
                                <th scope="col">S.No</th>
                                <th scope="col">Room No</th>
                                <th scope="col">Floor No</th>
                                <th scope="col">Total Beds</th>
                                <th scope="col">Bed No</th>
                                <th scope="col">Cost</th>
                                <th scope="col">Occupied</th>
                            </tr>
                            </thead>
                            <tbody id="tdata">
                            </tbody>
                        </table>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>
<script>
    function disp(){
        document.getElementById("open").style.display="block";
        document.getElementById("open").className = "modal-open";
        }
            function clk(){
            if(document.getElementById("roomno").value.length == 0)
              {
               alert("Enter Room No")
              }
               else if(document.getElementById("floorno").value.length == 0)
                 {
                    alert("Enter Floor No")
                 }
                     else if(document.getElementById("totalbeds").value.length == 0)
                       {
                        alert("Enter Total Beds")
                     }
else{

             document.getElementById("open").style.display="none";
                var myHeaders = new Headers();
myHeaders.append("Content-Type", "application/json");
console.log("loaded");

var raw = JSON.stringify({
  "id": 1,
  "roomNo": document.getElementById("roomno").value,
  "floorNo": document.getElementById("floorno").value,
  "totalBeds": document.getElementById("totalbeds").value
});

var requestOptions = {
  method: 'POST',
  headers: myHeaders,
  body: raw,
  redirect: 'follow'
};

fetch("http://localhost:8080/PG/room", requestOptions)
  .then(response => response.text())
  .then(result => console.log(result))
  .catch(error => console.log('error', error));
            }
            }

            async function load() {
                const response = await fetch("http://localhost:8080/PG/room")
            let data = await response.json();
            let i=0;
            let c=document.createElement("tr");
            var td0 = document.createElement("td");
            var td1 = document.createElement("td");
            var td2 = document.createElement("td");
            var td3 = document.createElement("td");
            var td4 = document.createElement("td");
            var td5 = document.createElement("td");
            var td6=document.createElement("td");
            var txt="";
             for(i=0;i<data.length;i++){
                c=document.createElement("tr");
                td0=document.createElement("td");
                td1 = document.createElement("td");
                td2 = document.createElement("td");
                td3 = document.createElement("td");
                td4 = document.createElement("td");
                td5 = document.createElement("td");
                td6=document.createElement("td");
                txt="";
                 txt =i+1;
                 td0.innerHTML=txt;
                 txt="";
                 txt =data[i]['roomNo'];
                 td1.innerHTML=txt;
                 txt="";
                 txt =data[i]['floorNo'];
                 td2.innerHTML=txt;
                 txt="";
                 txt =data[i]['totalBeds'];
                 td3.innerHTML=txt;
                 txt="";
                 txt =data[i]['bedNo'];
                 td4.innerHTML=txt;
                 txt="";
                 txt =data[i]['cost'];
                 td5.innerHTML=txt;
                 txt="";
                 txt=data[i]['isFull'];
                 if(txt==true){
                    txt="Yes";
                 }
                 else{
                    txt="No";
                 }
                 td6.innerHTML=txt;
                 c.appendChild(td0);
                  c.appendChild(td1);
                  c.appendChild(td2);
                  c.appendChild(td3);
                  c.appendChild(td4);
                  c.appendChild(td5);
                  c.appendChild(td6);
                 //console.log(txt);
                 document.getElementById("tdata").appendChild(c);
             }
            console.log(data);
            }
</script>
</body>
</html>